<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link rel="stylesheet" href="output.css" />
  </head>
  <body class="bg-[#4c0000]">
    <main
      class="flex flex-col gap-8 mt-[80px] ml-[15%] mr-[15%] md:ml-[25%] md:mr-[25%] lg:ml-[35%] lg:mr-[35%] justify-center items-center"
    >
      <img
        src="./assets/icons/upeek_logoGrande.svg"
        alt="logo principal"
        class="ml-20 mr-20"
      />
      <form
        id="loginForm"
        class="flex flex-col gap-6 justify-center items-center w-full"
      >
        <input
          type="email"
          placeholder="Email"
          id="emailLogin"
          class="w-full bg-white p-3 border border-gray-800 rounded-lg"
        />
        <input
          type="password"
          placeholder="Senha"
          id="senhaLogin"
          class="w-full bg-white p-3 border border-gray-800 rounded-lg"
        />

        <button
          type="submit"
          class="bg-[#C9A227] rounded-4xl w-fit py-[10px] px-6 hover:bg-[#B8931C] hover:border hover:border-b-neutral-50 hover:border-solid text-white cursor-pointer mx-auto"
        >
          Entrar
        </button>
      </form>

      <div class="flex flex-col gap-1 justify-center items-center">
        <a href="" class="text-white hover:underline">Esqueci minha senha.</a>
        <a href="register.html" class="text-white hover:underline"
          >Não tem conta? Registre-se aqui.</a
        >
      </div>
    </main>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const loginForm = document.getElementById("loginForm");

        loginForm.addEventListener("submit", (event) => {
          event.preventDefault();

          const email = document.getElementById("emailLogin").value.trim();
          const senha = document.getElementById("senhaLogin").value;

          if (!email || !senha) {
            alert("Por favor, preencha o email e a senha.");
            return;
          }

          const usuariosStr = localStorage.getItem("usuarios");
          const usuarios = usuariosStr ? JSON.parse(usuariosStr) : [];

          const usuarioLogado = usuarios.find(
            (user) => user.email === email && user.senha === senha
          );

          if (usuarioLogado) {
            sessionStorage.setItem("usuarioLogado", usuarioLogado.email);

            alert(
              `Bem-vindo, ${
                usuarioLogado.nomeCompleto.split(" ")[0]
              }! Login efetuado.`
            );

            window.location.href = "home.html";
          } else {
            alert("E-mail ou senha inválidos. Verifique suas credenciais.");
          }
        });
      });
    </script>
  </body>
</html>
